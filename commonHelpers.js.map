{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default searchImages;\n\nasync function searchImages(tagImage, page, perPage) {\n\n    axios.defaults.baseURL = 'https://pixabay.com/api/';\n\n    const searchParams = {\n        params: {\n            key: '42790970-549b29792af5c5ee610ad8401',\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: perPage,\n            page: page,\n            q: `${tagImage}`,\n        }\n    }\n\n    const response = await axios.get('', searchParams);\n        return response.data;\n}","export default createMarcupGallery;\n\nfunction createMarcupGallery(images) {\n  return images.map((element) => \n        `<li class=\"gallery-item\">\n          <div class=\"gallery-image-tumb\">\n            <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${element.webformatURL}\" alt=\"${element.tags}\" />\n            </a>\n          </div>\n            <ul class=\"image-info\">\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Likes</h4>\n                <p class=\"image-info-item-text\">${element.likes}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Views</h4>\n                <p class=\"image-info-item-text\">${element.views}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Comments</h4>\n                <p class=\"image-info-item-text\">${element.comments}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Downloads</h4>\n                <p class=\"image-info-item-text\">${element.downloads}</p>\n              </li>\n            </ul>\n        </li>`).join('');\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport searchImages from './js/pixabay-api';\nimport createMarcupGallery from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btn = document.querySelector('#load-more-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a',\n    {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n    let tagImage;\n    let perPage = 15;\n    let page;\n\nfunction showMessageError(textMes) {\n    iziToast.error({\n        message: textMes,\n        maxWidth: '432px',\n        position: 'topRight',\n        messageSize: 16,\n        backgroundColor: '#ef4040',\n        titleColor: '#FFFFFF',\n        messageColor: '#FFFFFF',\n        theme: 'dark',\n    }); \n}\n\nasync function showGallery(tagImage) {\n    btn.style.display = 'none';\n    if (tagImage) {\n        loader.style.display = 'grid';\n        let totalPages;\n       try {\n            const data = await searchImages(tagImage, page, perPage);\n            const arrayImages = data.hits;\n            totalPages = Math.ceil(data.totalHits / perPage);\n            if (arrayImages.length) {\n                const marcup = await createMarcupGallery(arrayImages);\n                gallery.insertAdjacentHTML('beforeend', marcup);\n                if (page != 1) {\n                    scrollPage();\n                }\n                lightbox.refresh();\n            } else {\n                    showMessageError(\n                        'Sorry, there are no images matching your search query. Please try again!');\n                }            \n        }                \n       catch (error) { showMessageError(`${error}`); }\n       finally {\n        loader.style.display = 'none';\n        if (page < totalPages) {\n            btn.style.display = 'block';\n        }\n        if (page === totalPages) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                maxWidth: '432px',\n                position: 'topRight',\n                messageSize: 16,\n            })\n        }\n        };\n    } \n}\n\nfunction scrollPage() {\n    const amountScroll = gallery.firstElementChild.getBoundingClientRect().height * 2;    \n    window.scrollBy({\n        top: amountScroll,\n        behavior: 'smooth',\n    })\n}\n\nform.addEventListener('submit', event => {\n    event.preventDefault();\n    tagImage = event.target.elements.search.value.trim();\n    form.reset();\n    gallery.innerHTML = null;\n    page = 1;\n    showGallery(tagImage);\n})\n\nbtn.addEventListener('click', () => {\n    page += 1;\n    showGallery(tagImage);\n})"],"names":["searchImages","tagImage","page","perPage","axios","searchParams","createMarcupGallery","images","element","form","gallery","loader","btn","lightbox","SimpleLightbox","showMessageError","textMes","iziToast","showGallery","totalPages","data","arrayImages","marcup","scrollPage","error","amountScroll","event"],"mappings":"owBAIA,eAAeA,EAAaC,EAAUC,EAAMC,EAAS,CAEjDC,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAe,CACjB,OAAQ,CACJ,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUF,EACV,KAAMD,EACN,EAAG,GAAGD,CAAQ,EACjB,CACJ,EAGG,OADa,MAAMG,EAAM,IAAI,GAAIC,CAAY,GAC7B,IACxB,CCpBA,SAASC,EAAoBC,EAAQ,CACnC,OAAOA,EAAO,IAAKC,GACb;AAAA;AAAA,4CAEoCA,EAAQ,aAAa;AAAA,kDACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAM1CA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,kDAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA,cAGrD,EAAE,KAAK,EAAE,CACvB,CCtBA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAM,SAAS,cAAc,gBAAgB,EAE7CC,EAAW,IAAIC,EAAe,aAChC,CACI,aAAc,MACd,aAAc,GACtB,CAAK,EAED,IAAIb,EACAE,EAAU,GACVD,EAER,SAASa,EAAiBC,EAAS,CAC/BC,EAAS,MAAM,CACX,QAASD,EACT,SAAU,QACV,SAAU,WACV,YAAa,GACb,gBAAiB,UACjB,WAAY,UACZ,aAAc,UACd,MAAO,MACf,CAAK,CACL,CAEA,eAAeE,EAAYjB,EAAU,CAEjC,GADAW,EAAI,MAAM,QAAU,OAChBX,EAAU,CACVU,EAAO,MAAM,QAAU,OACvB,IAAIQ,EACL,GAAI,CACC,MAAMC,EAAO,MAAMpB,EAAaC,EAAUC,EAAMC,CAAO,EACjDkB,EAAcD,EAAK,KAEzB,GADAD,EAAa,KAAK,KAAKC,EAAK,UAAYjB,CAAO,EAC3CkB,EAAY,OAAQ,CACpB,MAAMC,EAAS,MAAMhB,EAAoBe,CAAW,EACpDX,EAAQ,mBAAmB,YAAaY,CAAM,EAC1CpB,GAAQ,GACRqB,IAEJV,EAAS,QAAO,CAChC,MACoBE,EACI,0EAA0E,CAEzF,OACKS,EAAO,CAAET,EAAiB,GAAGS,CAAK,EAAE,CAAI,QACvC,CACPb,EAAO,MAAM,QAAU,OACnBT,EAAOiB,IACPP,EAAI,MAAM,QAAU,SAEpBV,IAASiB,GACTF,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,QACV,SAAU,WACV,YAAa,EAC7B,CAAa,CAEb,CACK,CACL,CAEA,SAASM,GAAa,CAClB,MAAME,EAAef,EAAQ,kBAAkB,sBAAuB,EAAC,OAAS,EAChF,OAAO,SAAS,CACZ,IAAKe,EACL,SAAU,QAClB,CAAK,CACL,CAEAhB,EAAK,iBAAiB,SAAUiB,GAAS,CACrCA,EAAM,eAAc,EACpBzB,EAAWyB,EAAM,OAAO,SAAS,OAAO,MAAM,OAC9CjB,EAAK,MAAK,EACVC,EAAQ,UAAY,KACpBR,EAAO,EACPgB,EAAYjB,CAAQ,CACxB,CAAC,EAEDW,EAAI,iBAAiB,QAAS,IAAM,CAChCV,GAAQ,EACRgB,EAAYjB,CAAQ,CACxB,CAAC"}